import{r as t,c as e,d as i,h as s,H as o,g as a}from"./p-c38a2331.js";import{g as l,m as n,C as r,l as d}from"./p-d0616d3d.js";class c{constructor(s){t(this,s),this.loc=l(),this.format="DD.MM.YYYY",this.dropdownActive=!1,this.dateSelected=e(this,"dateSelected",7),this.focusGained=e(this,"focusGained",7),this.focusLost=e(this,"focusLost",7),this.resourcesUrl=i(this,"resourcesUrl")}setValue(t){if("string"==typeof t){n.locale(this.loc);const e=n(t,this.format);this.internalValue=r.moment2CalendarDate(e)}}setFormat(){this.setValue(this.value)}handleWindowScroll(t){this.dropdownActive=!1,this.focusLost.emit()}handleBodyScroll(t){this.dropdownActive=!1,this.focusLost.emit()}handleBodyClick(t){this.dropdownActive&&this.el!==t.target&&this.dropdownActive&&(this.dropdownActive=!1,t.cancelBubble=!0,this.focusLost.emit())}async componentWillLoad(){await d(this.loc,n),this.setValue(this.value)}componentDidLoad(){this.setValue(this.value)}buttonClicked(){this.disabled||(this.dropdownActive=!this.dropdownActive,this.dropdownActive?this.focusGained.emit():this.focusLost.emit())}handleDateClicked(t){if(t.cancelBubble=!0,!this.disabled){const e=t.detail;this.dropdownActive=!1,this.internalValue=e,this.value=r.calendarDate2Moment(e,this.loc).format(this.format),this.dateSelected.emit(r.calendarDate2Moment(e,this.loc).toDate()),this.focusLost.emit()}}isDropdownActive(){return this.dropdownActive&&!this.disabled}getFlyoutCss(){if(!this.indicatorElement)return{};let t=this.indicatorElement.getBoundingClientRect().top+this.indicatorElement.offsetHeight;this.flyoutCalendar.style.display="block";let e=this.flyoutCalendar.getBoundingClientRect().height;return this.flyoutCalendar.style.display="",t+e>window.innerHeight&&(t=this.el.getBoundingClientRect().top-e),{top:Math.max(0,t)+"px"}}render(){return s(o,{class:{"og-form-item__editor":!0,"is-focused":this.dropdownActive}},s("div",{class:"og-datepicker__header",onClick:()=>this.buttonClicked()},s("input",{type:"text",class:"og-datepicker__input",readonly:"true",value:this.internalValue?r.calendarDate2Moment(this.internalValue,this.loc).format(this.format):"",placeholder:this.placeholder,disabled:this.disabled}),s("div",{class:"og-datepicker__button"},s("svg",{class:"og-datepicker__button__arrow"+(this.isDropdownActive()?" og-datepicker__button__arrow--collapsed":""),version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 24 12",preserveAspectRatio:"none"},s("polyline",{class:"og-datepicker__button__arrow__line",points:"0,0 12,12 24,0",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecaps":"round","stroke-linejoin":"round"}))),s("div",{class:"og-datepicker__indicator",ref:t=>this.indicatorElement=t})),s("div",{class:"og-datepicker__flyout"},s("og-calendar",{class:"og-datepicker__flyout__calendar"+(this.isDropdownActive()?" og-datepicker__flyout__calendar--visible":""),style:this.getFlyoutCss(),ref:t=>this.flyoutCalendar=t,year:this.internalValue?this.internalValue.year:void 0,month:this.internalValue?this.internalValue.month:void 0,loc:this.loc,dateDecorator:this.dateDecorator,selection:this.internalValue?[this.internalValue]:[],selectionType:"single",onDateClicked:t=>this.handleDateClicked(t)})))}get el(){return a(this)}static get watchers(){return{value:["setValue"],format:["setFormat"]}}static get style(){return":host{--og-datepicker-Background:var(--OG-COLOR-SHADE--80--05,rgba(62,129,163,0.05));--og-datepicker-BorderColor:var(--OG-COLOR-SHADE--100--20,rgba(57,83,96,0.2));--og-datepicker-BorderWidth:1px;--og-datepicker-BorderStyle:solid;--og-datepicker-Color:var(--OG-COLOR-SHADE--100,#395360);--og-datepicker-FontSize:inherit;--og-datepicker-Outline:none;--og-datepicker-Opacity:1;--og-datepicker__flyout-BoxShadow:0 0 8px rgba(0,0,0,0.05),0 2px 4px rgba(0,0,0,0.2);--og-datepicker__flyout-Background:var(--OG-COLOR-PRIMARY--0,#fff);--og-datepicker__flyout__item-Background:transparent;--og-datepicker__flyout__item-Background--hover:var(--OG-COLOR-PRIMARY--100--15,rgba(29,162,211,0.15));--og-datepicker__flyout__item-Background--active:var(--OG-COLOR-PRIMARY--100--30,rgba(29,162,211,0.3));--og-datepicker__flyout__item-Color:var(--OG-COLOR-SHADE--100,#395360);--og-datepicker__placeholder-Color:var(--OG-COLOR-SHADE--50,#8fadbc);--og-datepicker__indicator-Width:0;--og-datepicker__indicator-Height:2px;--og-datepicker__indicator-Background:var(--OG-COLOR-PRIMARY--100,#1da2d3);--og-datepicker__button__arrow-Width:16px;--og-datepicker__button__arrow-Height:16px;--og-datepicker__button__arrow-Padding:22px 2px 0 2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:auto;max-width:inherit;max-height:inherit;cursor:pointer;background:var(--og-datepicker-Background);opacity:var(--og-datepicker-Opacity);-webkit-box-sizing:border-box;box-sizing:border-box}:host *,:host :after,:host :before{-webkit-box-sizing:inherit;box-sizing:inherit}:host(.is-focused){--og-datepicker__button__indicator-Width:100%;--og-datepicker__indicator-Width:100%}:host([disabled]){cursor:default;--og-datepicker-Opacity:.3}.og-datepicker__header{display:-ms-flexbox;display:flex;position:relative;margin:4px;outline:var(--og-datepicker-Outline);border-bottom:var(--og-datepicker-BorderWidth) var(--og-datepicker-BorderStyle) var(--og-datepicker-BorderColor)}.og-datepicker__input{-ms-flex:1;flex:1;background:transparent;border:none;cursor:inherit;outline:none;color:var(--og-datepicker-Color);font-size:var(--og-datepicker-FontSize);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0;padding-top:25px;padding-bottom:4px}.og-datepicker__input::-webkit-input-placeholder{color:var(--og-datepicker__placeholder-Color)}.og-datepicker__input::-moz-placeholder{color:var(--og-datepicker__placeholder-Color)}.og-datepicker__input:-ms-input-placeholder{color:var(--og-datepicker__placeholder-Color)}.og-datepicker__input::-ms-input-placeholder{color:var(--og-datepicker__placeholder-Color)}.og-datepicker__input::placeholder{color:var(--og-datepicker__placeholder-Color)}.og-datepicker__input::-moz-selection{background:transparent}.og-datepicker__input::selection{background:transparent}.og-datepicker__button{-ms-flex:none;flex:none;width:var(--og-datepicker__button__arrow-Width);height:var(--og-datepicker__button__arrow-Width);padding:var(--og-datepicker__button__arrow-Padding)}.og-datepicker__indicator{display:var(--og-datepicker__indicator-Display);position:absolute;bottom:calc(var(--og-datepicker-BorderWidth) * -1);left:0;height:var(--og-datepicker__indicator-Height);background:var(--og-datepicker__indicator-Background);width:var(--og-datepicker__indicator-Width);-webkit-transition:width .2s ease;transition:width .2s ease}.og-datepicker__button__arrow{-webkit-transition:-webkit-transform .1s;transition:-webkit-transform .1s;transition:transform .1s;transition:transform .1s,-webkit-transform .1s;overflow:visible}.og-datepicker__button__arrow--collapsed{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.og-datepicker__button__arrow__line{stroke-linecap:round;stroke-linejoin:round}.og-datepicker__flyout{position:relative;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;cursor:default}.og-datepicker__flyout__calendar{margin:0;margin-top:4px;padding:16px;display:none;position:fixed;-webkit-box-shadow:var(--og-datepicker__flyout-BoxShadow);box-shadow:var(--og-datepicker__flyout-BoxShadow);background:var(--og-datepicker__flyout-Background);z-index:9999;overflow-y:auto}.og-datepicker__flyout__calendar--visible{display:block}"}}export{c as og_datepicker};